<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Credential Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f8f9fa;
    }
    .container {
      max-width: 800px;
      margin-top: 40px;
    }
    .tab-content .card {
      padding: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      border-radius: 12px;
      background-color: white;
      margin-top: 15px;
    }
    #qrcode {
      margin: 15px 0;
    }
    #reader {
      width: 100%;
    }
    .nav-tabs .nav-link.active {
      background-color: #0d6efd;
      color: white;
      border-color: #dee2e6 #dee2e6 white;

    }
  </style>
</head>
<body>

  <div class="container">
    <h1 class="text-center mb-4">ğŸ“ Credential DApp Dashboard</h1>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <button class="btn btn-primary" onclick="connectWallet()">ğŸ”— Connect Wallet</button>
      <div id="walletAddress" class="text-success fw-bold small text-end"></div>
    </div>

    <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="issue-tab" data-bs-toggle="tab" data-bs-target="#issue" type="button" role="tab">ğŸ“¤ Issue Credential</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="verify-tab" data-bs-toggle="tab" data-bs-target="#verify" type="button" role="tab">ğŸ” Verify Credential</button>
      </li>
    </ul>

    <div class="tab-content" id="dashboardContent">

      <!-- Issue Credential -->
      <div class="tab-pane fade show active" id="issue" role="tabpanel">
        <div class="card">
          <h5>Issue Credential</h5>
          <div class="row">
           <div class="col">
             <input type="text" id="firstName" class="form-control mb-2" placeholder="First Name" oninput="validateText(this)">
           </div>
             <div class="col">
               <input type="text" id="familyName" class="form-control mb-2" placeholder="Family Name" oninput="validateText(this)">
             </div>
           </div>
           <select id="credentialType" class="form-control mb-2">
               <option value="">Select Credential Type</option>
               <option value="Bachelor Degree">Bachelor Degree</option>
               <option value="Master Degree">Master Degree</option>
               <option value="Doctorate (PhD)">Doctorate (PhD)</option>
               <option value="Diploma">Diploma</option>
               <option value="Transcript">Transcript</option>
               <option value="Letter of Completion">Letter of Completion</option>
               <option value="Academic Certificate">Academic Certificate</option>
               <option value="Honor Award">Honor Award</option>
           </select>
          <input type="text" id="course" class="form-control mb-2" placeholder="Course" oninput="validateText(this)">
          <input type="text" id="institution" class="form-control mb-2" placeholder="Institution" oninput="validateText(this)">
          <button class="btn btn-success w-100" onclick="issueCredential()">âœ… Issue</button>
          <div class="d-flex align-items-center mt-3">
          <div id="issuedHash" class="fw-bold text-primary"></div>
          <button class="btn btn-sm btn-outline-primary ms-2 d-none" id="copyHashBtn">ğŸ“‹ Copy Hash</button>
           </div>
           <div id="qrcode" class="mt-2"></div>
          <button class="btn btn-outline-secondary d-none" id="downloadQR">â¬‡ï¸ Download QR</button>
        </div>
      </div>

      <!-- Verify Credential -->
      <div class="tab-pane fade" id="verify" role="tabpanel">
        <div class="card">
          <h5>Verify Credential</h5>
          <input type="text" id="hashToVerify" class="form-control mb-2" placeholder="Paste Credential Hash">
          <button class="btn btn-info w-100" onclick="verifyCredential()">ğŸ” Verify</button>
          <h6 class="mt-4">ğŸ“· Or scan QR to autofill:</h6>
          <div id="reader" class="mb-3"></div>
          <div id="verificationResult" class="mt-3 fw-bold"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- Scripts -->
  <script src="abi.js"></script>
  <script src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
